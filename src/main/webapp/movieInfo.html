<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>test</title>
</head>

<body>
    <div class="f1">
        <div class="f1-1"></div>
        <div class="f1-2">
            <a href="">예매하기</a>
        </div>
    </div>

    <div class="f2">
        <h1 class="title"></h1>
        <h3 class="info" ></h3>
    </div>

    <div class="f3">
        <p></p>
    </div>

    <div class="f4"></div>

    <div class="f5"></div>

    <script>
        let key = "6446bae76aaffa9af6d4c00b2299f016";
        let base_url = "https://image.tmdb.org/t/p/w500";

        let container = document.querySelector(".container");
        let body = document.querySelector("body");

        let srcPara = new URL(location.href).searchParams;
        let name = srcPara.get('title');
        
        function fetchMovie(page) {
            // let url = `https://api.themoviedb.org/3/search/movie?api_key=${key}&query=${name}&language=ko-KR`;
            let url = `https://api.themoviedb.org/3/search/movie?api_key=${key}&query=기생충&language=ko-KR`;
            fetch(url)
                .then(res => res.json())
                .then(function (res) {

                    console.log(res.results[0]);

                    // div class 요소
                    let f1 = document.querySelector('.f1');
                    let f2 = document.querySelector('.f2');
                    let f3 = document.querySelector('.f3');
                    let f4 = document.querySelector('.f4');
                    let f5 = document.querySelector('.f5');

                    // query 결과확인
                    let movie = res.results[0];

                    // result 에서 가져올 항목
                    let poster = base_url + movie.poster_path;
                    let overview = movie.overview;
                    let title = movie.original_title;
                    let relDate = movie.release_date;

                    // f1-1 poster
                    let imgTag = document.createElement('img');
                    imgTag.setAttribute('width', '300');
                    imgTag.src = poster;

                    f1.firstElementChild.appendChild(imgTag);

                    // f2 info
                    let titleTag = document.querySelector('.title');
                    titleTag.innerHTML = title;

                    let infoTag = document.querySelector('.info');
                    
                    // f3 overview
                    let ovTag = document.querySelector('.f3');
                    ovTag.firstElementChild.innerHTML = overview;
                    
    
                })
                .catch(error => console.log(error));
        };

        window.addEventListener('onLoad', fetchMovie());
    </script>


</body>

</html>